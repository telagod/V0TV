# ğŸ¬ æ’­æ”¾åŠŸèƒ½å®Œæ•´åˆ†ææŠ¥å‘Š

> V0TV é¡¹ç›® - æ’­æ”¾æ¨¡å—ä»£ç åˆ†æä¸é—®é¢˜è¯†åˆ«

---

## ğŸ“‹ åˆ†ææ¦‚è¿°

**åˆ†ææ—¶é—´**: 2025-11-12
**åˆ†ææ–‡ä»¶æ•°**: 4 ä¸ªä¸»è¦æ–‡ä»¶
**ä»£ç è¡Œæ•°**: ~2600 è¡Œ
**æ ¸å¿ƒç»„ä»¶**: æ’­æ”¾é¡µé¢ã€é€‰é›†ç»„ä»¶ã€è·³è¿‡æ§åˆ¶å™¨ã€æµ‹é€Ÿå·¥å…·

---

## ğŸ“ æ–‡ä»¶ç»“æ„

### 1. æ’­æ”¾é¡µé¢

- **æ–‡ä»¶**: `src/app/play/page.tsx` (1816 è¡Œ)
- **ä½œç”¨**: æ ¸å¿ƒæ’­æ”¾é¡µé¢ï¼ŒåŒ…å«æ’­æ”¾å™¨ã€é€‰é›†ã€æ¢æºã€æ”¶è—ç­‰åŠŸèƒ½
- **ä¾èµ–**: Artplayerã€Hls.jsã€å¤šä¸ªç»„ä»¶å’Œå·¥å…·

### 2. é€‰é›†ç»„ä»¶

- **æ–‡ä»¶**: `src/components/EpisodeSelector.tsx` (~400 è¡Œ)
- **ä½œç”¨**: å¤„ç†é€‰é›†åˆ‡æ¢å’Œæ¢æºåŠŸèƒ½
- **ç‰¹æ€§**: åˆ†é¡µã€å€’åºã€è§†é¢‘ä¿¡æ¯å±•ç¤º

### 3. è·³è¿‡æ§åˆ¶å™¨

- **æ–‡ä»¶**: `src/components/SkipController.tsx` (~500 è¡Œ)
- **ä½œç”¨**: ç‰‡å¤´ç‰‡å°¾è·³è¿‡åŠŸèƒ½
- **ç‰¹æ€§**: è‡ªåŠ¨è·³è¿‡ã€æ‰‹åŠ¨è·³è¿‡ã€å€’è®¡æ—¶

### 4. æµ‹é€Ÿå·¥å…·

- **æ–‡ä»¶**: `src/lib/client-speed-test.ts` (278 è¡Œ)
- **ä½œç”¨**: å®¢æˆ·ç«¯æ™ºèƒ½æµ‹é€Ÿ
- **ç‰¹æ€§**: é‡‡æ ·ã€æ‰¹å¤„ç†ã€å¹¶å‘æ§åˆ¶

### 5. å·¥å…·å‡½æ•°

- **æ–‡ä»¶**: `src/lib/utils.ts` (éƒ¨åˆ†)
- **ä½œç”¨**: è§†é¢‘è´¨é‡æ£€æµ‹ã€å›¾ç‰‡å¤„ç†ç­‰
- **æ ¸å¿ƒ**: `getVideoResolutionFromM3u8()`

---

## âœ¨ å·²å®ç°çš„åŠŸèƒ½

### ğŸ¥ æ’­æ”¾å™¨åŠŸèƒ½

#### 1. è§†é¢‘æ’­æ”¾

- âœ… åŸºäº Artplayer + Hls.js
- âœ… æ”¯æŒ M3U8 ç›´æ’­æµ
- âœ… è‡ªåŠ¨æ’­æ”¾
- âœ… æ’­æ”¾/æš‚åœ
- âœ… è¿›åº¦æ¡æ§åˆ¶
- âœ… éŸ³é‡æ§åˆ¶
- âœ… å€é€Ÿæ’­æ”¾ï¼ˆ0.5x - 3xï¼‰
- âœ… ç”»ä¸­ç”»ï¼ˆPIPï¼‰
- âœ… å…¨å±/ç½‘é¡µå…¨å±
- âœ… AirPlay æ”¯æŒ
- âœ… å±å¹•æ–¹å‘è‡ªåŠ¨è°ƒæ•´

#### 2. å¹¿å‘Šè¿‡æ»¤

- âœ… M3U8 å†…å®¹è¿‡æ»¤
- âœ… å»é™¤ #EXT-X-DISCONTINUITY æ ‡è®°
- âœ… å…³é”®è¯åŒ¹é…ï¼ˆad.ã€ads.ã€advert ç­‰ï¼‰
- âœ… æ­£åˆ™æ¨¡å¼åŒ¹é…ï¼ˆad_1ã€/ad/ç­‰ï¼‰
- âœ… çŸ­æ—¶é•¿ç‰‡æ®µè¿‡æ»¤ï¼ˆ< 3 ç§’ï¼‰
- âœ… è‡ªå®šä¹‰ HLS Loader
- âœ… å¼€å…³æ§åˆ¶ï¼ˆlocalStorage æŒä¹…åŒ–ï¼‰

**ä»£ç ä½ç½®**: `src/app/play/page.tsx:400-520`

```typescript
function filterAdsFromM3U8(m3u8Content: string): string {
  // æŒ‰è¡Œåˆ†å‰²M3U8å†…å®¹
  const lines = m3u8Content.split('\n');
  const filteredLines = [];
  let skipNext = false;
  let removedCount = 0;

  // å¹¿å‘ŠURLç‰¹å¾å…³é”®è¯
  const adKeywords = [
    'ad.',
    'ads.',
    'adv.',
    'advert',
    'commercial',
    'preroll',
    'midroll',
    'sponsor',
    'promotion',
  ];

  // å¹¿å‘ŠURLæ­£åˆ™æ¨¡å¼
  const adPatterns = [
    /ad[_-]?\d+/i,
    /advert[_-]?\d+/i,
    /commercial[_-]?\d+/i,
    /-ad-/i,
    /\/ad\//i,
  ];

  // è¿‡æ»¤é€»è¾‘...
}
```

---

### ğŸ“º é›†æ•°ç®¡ç†

#### 1. é€‰é›†åŠŸèƒ½

- âœ… åˆ†é¡µæ˜¾ç¤ºï¼ˆæ¯é¡µ 10/50 é›†å¯é…ï¼‰
- âœ… å¿«é€Ÿè·³è½¬åˆ°æŒ‡å®šåˆ†é¡µ
- âœ… å€’åº/æ­£åºåˆ‡æ¢
- âœ… å½“å‰é›†é«˜äº®æ˜¾ç¤º
- âœ… è‡ªåŠ¨æ»šåŠ¨åˆ°å½“å‰åˆ†é¡µ
- âœ… é”®ç›˜å¿«æ·é”®æ”¯æŒ
  - Alt + å·¦ç®­å¤´ï¼šä¸Šä¸€é›†
  - Alt + å³ç®­å¤´ï¼šä¸‹ä¸€é›†
- âœ… æ’­æ”¾ç»“æŸè‡ªåŠ¨ä¸‹ä¸€é›†

**ä»£ç ä½ç½®**: `src/components/EpisodeSelector.tsx`

#### 2. æ¢æºåŠŸèƒ½

- âœ… è‡ªåŠ¨æœç´¢æ‰€æœ‰å¯ç”¨æº
- âœ… è§†é¢‘ä¿¡æ¯å±•ç¤ºï¼ˆè´¨é‡ã€é€Ÿåº¦ã€å»¶è¿Ÿï¼‰
- âœ… å®æ—¶æµ‹é€Ÿ
- âœ… æ™ºèƒ½é‡‡æ ·æµ‹é€Ÿï¼ˆé¿å…å…¨éƒ¨æµ‹é€Ÿï¼‰
- âœ… æ‰¹é‡å¹¶å‘æ§åˆ¶
- âœ… æºä¼˜å…ˆçº§æ’åº
- âœ… åˆ‡æ¢æºæ—¶ä¿æŒæ’­æ”¾è¿›åº¦
- âœ… æ¸…é™¤æ—§æ’­æ”¾è®°å½•

**ä»£ç ä½ç½®**: `src/app/play/page.tsx:720-793`

---

### ğŸš€ æ’­æ”¾æºä¼˜é€‰

#### 1. æ™ºèƒ½æµ‹é€Ÿ

- âœ… é‡‡æ ·æœºåˆ¶ï¼ˆä» N ä¸ªæºä¸­é€‰ 3 ä¸ªï¼‰
- âœ… æ‰¹å¤„ç†ï¼ˆæ¯æ‰¹ 3 ä¸ªï¼‰
- âœ… å¹¶å‘æ§åˆ¶ï¼ˆæœ€å¤š 3 ä¸ªï¼‰
- âœ… è¶…æ—¶æ§åˆ¶ï¼ˆ5 ç§’ï¼‰
- âœ… å¿«é€Ÿå¤±è´¥æœºåˆ¶

**ä»£ç ä½ç½®**: `src/lib/client-speed-test.ts`

```typescript
const CLIENT_SPEED_TEST_CONFIG = {
  SAMPLE_SIZE: 3, // ä»Nä¸ªæºä¸­é‡‡æ ·3ä¸ª
  BATCH_SIZE: 3, // æ¯æ‰¹æµ‹3ä¸ª
  MAX_CONCURRENT: 3, // æœ€å¤š3ä¸ªå¹¶å‘
  TIMEOUT: 5000, // 5ç§’è¶…æ—¶
};
```

#### 2. ç»¼åˆè¯„åˆ†

- âœ… åˆ†è¾¨ç‡è¯„åˆ†ï¼ˆ40%æƒé‡ï¼‰
  - 4K: 100 åˆ†
  - 2K: 85 åˆ†
  - 1080p: 75 åˆ†
  - 720p: 60 åˆ†
  - 480p: 40 åˆ†
- âœ… ä¸‹è½½é€Ÿåº¦è¯„åˆ†ï¼ˆ40%æƒé‡ï¼‰
- âœ… ç½‘ç»œå»¶è¿Ÿè¯„åˆ†ï¼ˆ20%æƒé‡ï¼‰
- âœ… è‡ªåŠ¨é€‰æ‹©æœ€ä½³æº

**ä»£ç ä½ç½®**: `src/app/play/page.tsx:290-358`

---

### â© ç‰‡å¤´ç‰‡å°¾è·³è¿‡

#### 1. è·³è¿‡è®¾ç½®

- âœ… ç‰‡å¤´æ—¶é—´è®¾ç½®ï¼ˆåˆ†:ç§’æ ¼å¼ï¼‰
- âœ… ç‰‡å°¾æ—¶é—´è®¾ç½®ï¼ˆæ”¯æŒä¸¤ç§æ¨¡å¼ï¼‰
  - å‰©ä½™æ—¶é—´æ¨¡å¼ï¼ˆè·ç¦»ç»“æŸè¿˜å‰©å¤šä¹…ï¼‰
  - ç»å¯¹æ—¶é—´æ¨¡å¼ï¼ˆä»å¼€å§‹å¤šä¹…ï¼‰
- âœ… è‡ªåŠ¨è·³è¿‡å¼€å…³
- âœ… è‡ªåŠ¨ä¸‹ä¸€é›†å¼€å…³
- âœ… æ‰¹é‡è®¾ç½®åŠŸèƒ½
- âœ… é…ç½®æŒä¹…åŒ–ï¼ˆDB å­˜å‚¨ï¼‰

**ä»£ç ä½ç½®**: `src/components/SkipController.tsx`

#### 2. è·³è¿‡åŠŸèƒ½

- âœ… è‡ªåŠ¨è·³è¿‡ï¼ˆå»¶è¿Ÿ 1 ç§’æ‰§è¡Œï¼‰
- âœ… æ‰‹åŠ¨è·³è¿‡æŒ‰é’®
- âœ… ç‰‡å°¾å€’è®¡æ—¶ï¼ˆè‡ªåŠ¨è·³è½¬ä¸‹ä¸€é›†ï¼‰
- âœ… è·³è¿‡æç¤ºé€šçŸ¥
- âœ… æ—¶é—´æ ¼å¼è½¬æ¢ï¼ˆæ”¯æŒ 2:10ã€130 ç­‰æ ¼å¼ï¼‰

**è·³è¿‡é€»è¾‘**:

```typescript
// æ£€æŸ¥å½“å‰æ’­æ”¾æ—¶é—´æ˜¯å¦åœ¨è·³è¿‡åŒºé—´å†…
const checkSkipSegment = (time: number) => {
  if (!skipConfig?.segments?.length) return;

  const currentSegment = skipConfig.segments.find(
    (segment) => time >= segment.start && time <= segment.end
  );

  if (currentSegment && currentSegment !== currentSkipSegment) {
    // è‡ªåŠ¨è·³è¿‡æˆ–æ˜¾ç¤ºæŒ‰é’®
  }
};
```

---

### ğŸ’¾ æ’­æ”¾è®°å½•

#### 1. æ’­æ”¾è¿›åº¦ä¿å­˜

- âœ… å®æ—¶ä¿å­˜ï¼ˆé—´éš” 5-20 ç§’ï¼Œæ ¹æ®å­˜å‚¨ç±»å‹ï¼‰
- âœ… æš‚åœæ—¶ä¿å­˜
- âœ… é¡µé¢å¸è½½æ—¶ä¿å­˜
- âœ… é¡µé¢éšè—æ—¶ä¿å­˜
- âœ… åˆ‡æ¢é›†æ•°æ—¶ä¿å­˜
- âœ… åŒ…å«ä¿¡æ¯ï¼š
  - æ’­æ”¾æ—¶é—´
  - æ€»æ—¶é•¿
  - é›†æ•°ç´¢å¼•
  - è§†é¢‘æ ‡é¢˜
  - å°é¢å›¾ç‰‡
  - ä¿å­˜æ—¶é—´æˆ³

**ä»£ç ä½ç½®**: `src/app/play/page.tsx:933-978`

#### 2. æ’­æ”¾è¿›åº¦æ¢å¤

- âœ… è¿›å…¥é¡µé¢æ—¶è‡ªåŠ¨åŠ è½½
- âœ… è·³è½¬åˆ°ä¸Šæ¬¡æ’­æ”¾çš„é›†æ•°
- âœ… æ¢å¤ä¸Šæ¬¡æ’­æ”¾ä½ç½®
- âœ… æ™ºèƒ½å¤„ç†ä¸´è¿‘ç»“æŸçš„è§†é¢‘ï¼ˆè·³åˆ°ç»“æŸå‰ 5 ç§’ï¼‰

**ä»£ç ä½ç½®**: `src/app/play/page.tsx:689-718`

---

### â¤ï¸ æ”¶è—åŠŸèƒ½

#### 1. æ”¶è—ç®¡ç†

- âœ… æ·»åŠ /åˆ é™¤æ”¶è—
- âœ… æ”¶è—çŠ¶æ€æ˜¾ç¤º
- âœ… å®æ—¶æ›´æ–°ï¼ˆäº‹ä»¶è®¢é˜…ï¼‰
- âœ… æ•°æ®æŒä¹…åŒ–
- âœ… åŒ…å«ä¿¡æ¯ï¼š
  - è§†é¢‘æ ‡é¢˜
  - æºåç§°
  - å¹´ä»½
  - å°é¢
  - æ€»é›†æ•°
  - ä¿å­˜æ—¶é—´

**ä»£ç ä½ç½®**: `src/app/play/page.tsx:1016-1076`

---

### âŒ¨ï¸ é”®ç›˜å¿«æ·é”®

- âœ… **Alt + å·¦ç®­å¤´**: ä¸Šä¸€é›†
- âœ… **Alt + å³ç®­å¤´**: ä¸‹ä¸€é›†
- âœ… **å·¦ç®­å¤´**: å¿«é€€ 10 ç§’
- âœ… **å³ç®­å¤´**: å¿«è¿› 10 ç§’
- âœ… **ä¸Šç®­å¤´**: éŸ³é‡+10%
- âœ… **ä¸‹ç®­å¤´**: éŸ³é‡-10%
- âœ… **ç©ºæ ¼**: æ’­æ”¾/æš‚åœ
- âœ… **F é”®**: åˆ‡æ¢å…¨å±

**ä»£ç ä½ç½®**: `src/app/play/page.tsx:843-928`

---

### ğŸ¨ UI/UX åŠŸèƒ½

#### 1. åŠ è½½çŠ¶æ€

- âœ… æœç´¢é˜¶æ®µæç¤º
- âœ… ä¼˜é€‰é˜¶æ®µæç¤º
- âœ… è·å–è¯¦æƒ…æç¤º
- âœ… å‡†å¤‡å°±ç»ªæç¤º
- âœ… æ¢æºåŠ è½½æç¤º
- âœ… è¿›åº¦æŒ‡ç¤ºå™¨
- âœ… åŠ¨ç”»æ•ˆæœ

#### 2. é”™è¯¯å¤„ç†

- âœ… é”™è¯¯é¡µé¢å±•ç¤º
- âœ… è¿”å›æœç´¢æŒ‰é’®
- âœ… é‡æ–°å°è¯•æŒ‰é’®
- âœ… å‹å¥½çš„é”™è¯¯æç¤º

#### 3. å“åº”å¼å¸ƒå±€

- âœ… ç§»åŠ¨ç«¯ä¼˜åŒ–
- âœ… æ¡Œé¢ç«¯ä¼˜åŒ–
- âœ… æŠ˜å é€‰é›†é¢æ¿ï¼ˆæ¡Œé¢ç«¯ï¼‰
- âœ… è‡ªé€‚åº”é«˜åº¦

---

## âŒ è¯†åˆ«çš„é—®é¢˜

### ğŸ› é—®é¢˜ 1: æ’­æ”¾å™¨å†…å­˜æ³„æ¼é£é™©

**ä½ç½®**: `src/app/play/page.tsx:1078-1379`

**é—®é¢˜æè¿°**:
æ’­æ”¾å™¨çš„ useEffect ä¾èµ–é¡¹è¿‡å¤šä¸”æ¸…ç†ä¸å®Œæ•´ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼š

```typescript
useEffect(() => {
  // åˆ›å»ºæ’­æ”¾å™¨
  artPlayerRef.current = new Artplayer({...});

  // ç›‘å¬å¤šä¸ªäº‹ä»¶
  artPlayerRef.current.on('ready', () => {});
  artPlayerRef.current.on('video:volumechange', () => {});
  artPlayerRef.current.on('video:timeupdate', () => {});
  artPlayerRef.current.on('video:canplay', () => {});
  artPlayerRef.current.on('error', (err: any) => {});
  artPlayerRef.current.on('video:ended', () => {});
  artPlayerRef.current.on('pause', () => {});

  // âŒ æ²¡æœ‰æ¸…ç†å‡½æ•°ï¼
}, [Artplayer, Hls, videoUrl, loading, blockAdEnabled]);
```

**é—®é¢˜**:

1. **ç¼ºå°‘æ¸…ç†å‡½æ•°**: effect æ²¡æœ‰è¿”å›æ¸…ç†å‡½æ•°æ¥ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
2. **é‡å¤ç›‘å¬**: video:timeupdate è¢«ç›‘å¬äº†ä¸¤æ¬¡ï¼ˆline 1290 å’Œ 1350ï¼‰
3. **ä¾èµ–é¡¹å˜åŒ–é¢‘ç¹**: blockAdEnabled å˜åŒ–ä¼šå¯¼è‡´æ•´ä¸ªæ’­æ”¾å™¨é‡å»º

**å½±å“**:

- å†…å­˜æ³„æ¼
- äº‹ä»¶ç›‘å¬å™¨ç´¯ç§¯
- æ€§èƒ½ä¸‹é™

**å»ºè®®ä¿®å¤**:

```typescript
useEffect(() => {
  // åˆ›å»ºæ’­æ”¾å™¨
  const art = new Artplayer({...});
  artPlayerRef.current = art;

  // äº‹ä»¶å¤„ç†å™¨
  const handlers = {
    ready: () => {},
    volumechange: () => {},
    timeupdate: () => {},
    // ...
  };

  // æ³¨å†Œäº‹ä»¶
  Object.entries(handlers).forEach(([event, handler]) => {
    art.on(event, handler);
  });

  // âœ… æ¸…ç†å‡½æ•°
  return () => {
    Object.entries(handlers).forEach(([event, handler]) => {
      art.off?.(event, handler);
    });
    if (art.video?.hls) {
      art.video.hls.destroy();
    }
    art.destroy();
  };
}, [videoUrl, loading]); // å‡å°‘ä¾èµ–é¡¹
```

---

### âš ï¸ é—®é¢˜ 2: é‡å¤çš„ timeupdate ç›‘å¬

**ä½ç½®**: `src/app/play/page.tsx:1290å’Œ1350`

**é—®é¢˜æè¿°**:
`video:timeupdate`äº‹ä»¶è¢«ç›‘å¬äº†ä¸¤æ¬¡ï¼Œåšä¸åŒçš„äº‹æƒ…ï¼š

```typescript
// Line 1290: ç”¨äºè·³è¿‡åŠŸèƒ½
artPlayerRef.current.on('video:timeupdate', () => {
  const currentTime = artPlayerRef.current.currentTime || 0;
  setCurrentPlayTime(currentTime);

  const duration = artPlayerRef.current.duration || 0;
  if (duration > 0 && videoDuration !== duration) {
    setVideoDuration(duration);
  }
});

// Line 1350: ç”¨äºä¿å­˜æ’­æ”¾è¿›åº¦
artPlayerRef.current.on('video:timeupdate', () => {
  const now = Date.now();
  let interval = 5000;
  if (process.env.NEXT_PUBLIC_STORAGE_TYPE === 'd1') {
    interval = 10000;
  }
  if (process.env.NEXT_PUBLIC_STORAGE_TYPE === 'upstash') {
    interval = 20000;
  }
  if (now - lastSaveTimeRef.current > interval) {
    saveCurrentPlayProgress();
    lastSaveTimeRef.current = now;
  }
});
```

**é—®é¢˜**:

1. **é‡å¤ç›‘å¬**: åŒä¸€ä¸ªäº‹ä»¶è¢«æ³¨å†Œä¸¤æ¬¡
2. **æ€§èƒ½å½±å“**: æ¯æ¬¡ timeupdate éƒ½ä¼šè§¦å‘ä¸¤ä¸ªå›è°ƒ
3. **ä»£ç ç»´æŠ¤æ€§å·®**: é€»è¾‘åˆ†æ•£

**å»ºè®®ä¿®å¤**:

```typescript
// âœ… åˆå¹¶ä¸ºä¸€ä¸ªç›‘å¬å™¨
artPlayerRef.current.on('video:timeupdate', () => {
  const currentTime = artPlayerRef.current.currentTime || 0;
  const duration = artPlayerRef.current.duration || 0;

  // æ›´æ–°çŠ¶æ€ï¼ˆè·³è¿‡åŠŸèƒ½ï¼‰
  setCurrentPlayTime(currentTime);
  if (duration > 0 && videoDuration !== duration) {
    setVideoDuration(duration);
  }

  // ä¿å­˜æ’­æ”¾è¿›åº¦
  const now = Date.now();
  const interval = getIntervalByStorageType();
  if (now - lastSaveTimeRef.current > interval) {
    saveCurrentPlayProgress();
    lastSaveTimeRef.current = now;
  }
});
```

---

### ğŸ”§ é—®é¢˜ 3: WebKit æµè§ˆå™¨ç‰¹æ®Šå¤„ç†é€»è¾‘é—®é¢˜

**ä½ç½®**: `src/app/play/page.tsx:1107-1126`

**é—®é¢˜æè¿°**:

```typescript
// æ£€æµ‹æ˜¯å¦ä¸ºWebKitæµè§ˆå™¨
const isWebkit =
  typeof window !== 'undefined' &&
  typeof (window as any).webkitConvertPointFromNodeToPage === 'function';

// éWebKitæµè§ˆå™¨ä¸”æ’­æ”¾å™¨å·²å­˜åœ¨ï¼Œä½¿ç”¨switchæ–¹æ³•åˆ‡æ¢
if (!isWebkit && artPlayerRef.current) {
  artPlayerRef.current.switch = videoUrl;
  artPlayerRef.current.title = `${videoTitle} - ç¬¬${currentEpisodeIndex + 1}é›†`;
  artPlayerRef.current.poster = videoCover;
  // ...
  return;
}

// WebKitæµè§ˆå™¨æˆ–é¦–æ¬¡åˆ›å»ºï¼šé”€æ¯ä¹‹å‰çš„æ’­æ”¾å™¨å®ä¾‹å¹¶åˆ›å»ºæ–°çš„
if (artPlayerRef.current) {
  // é”€æ¯æ’­æ”¾å™¨å®ä¾‹
  artPlayerRef.current.destroy();
  artPlayerRef.current = null;
}
```

**é—®é¢˜**:

1. **æ£€æµ‹æ–¹æ³•è¿‡æ—¶**: `webkitConvertPointFromNodeToPage` ä¸æ˜¯å¯é çš„ WebKit æ£€æµ‹æ–¹æ³•
2. **é€»è¾‘ä¸æ¸…æ™°**: ä¸ºä»€ä¹ˆ WebKit éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Ÿ
3. **Safari å…¼å®¹æ€§**: iOS Safari / macOS Safari çš„è¡Œä¸ºå·®å¼‚æœªè€ƒè™‘
4. **Chrome ä¹Ÿæ˜¯ WebKit æ ¸å¿ƒ**: ä»£ç å¯èƒ½é”™è¯¯è¯†åˆ« Chrome

**å»ºè®®ä¿®å¤**:

```typescript
// âœ… æ›´å¯é çš„Safariæ£€æµ‹
const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);

// âœ… æˆ–è€…ç›´æ¥ç»Ÿä¸€å¤„ç†ï¼Œä½¿ç”¨switchæ–¹æ³•
if (artPlayerRef.current && videoUrl !== artPlayerRef.current.url) {
  try {
    artPlayerRef.current.switchUrl(videoUrl);
    artPlayerRef.current.title = `${videoTitle} - ç¬¬${
      currentEpisodeIndex + 1
    }é›†`;
    artPlayerRef.current.poster = videoCover;
  } catch (err) {
    // switchå¤±è´¥æ—¶æ‰é‡å»ºæ’­æ”¾å™¨
    console.warn('Switch URL failed, recreating player', err);
    artPlayerRef.current.destroy();
    // åˆ›å»ºæ–°æ’­æ”¾å™¨
  }
}
```

---

### ğŸ“Š é—®é¢˜ 4: æµ‹é€Ÿç»“æœæœªè¿‡æœŸå¤„ç†

**ä½ç½®**: `src/components/EpisodeSelector.tsx:67-86`

**é—®é¢˜æè¿°**:

```typescript
const [videoInfoMap, setVideoInfoMap] = useState<Map<string, VideoInfo>>(
  new Map()
);
const [attemptedSources, setAttemptedSources] = useState<Set<string>>(
  new Set()
);

// ...

const getVideoInfo = useCallback(async (source: SearchResult) => {
  const sourceKey = `${source.source}-${source.id}`;

  // âŒ ä¸€æ—¦æµ‹é€Ÿè¿‡å°±æ°¸è¿œä¸ä¼šå†æµ‹é€Ÿ
  if (attemptedSourcesRef.current.has(sourceKey)) {
    return;
  }

  // æ ‡è®°ä¸ºå·²å°è¯•
  setAttemptedSources((prev) => new Set(prev).add(sourceKey));

  try {
    const info = await getVideoResolutionFromM3u8(episodeUrl);
    setVideoInfoMap((prev) => new Map(prev).set(sourceKey, info));
  } catch (error) {
    // ...
  }
}, []);
```

**é—®é¢˜**:

1. **æ— è¿‡æœŸæœºåˆ¶**: æµ‹é€Ÿç»“æœæ°¸ä¹…æœ‰æ•ˆï¼Œæºçš„é€Ÿåº¦å¯èƒ½å·²ç»å˜åŒ–
2. **é”™è¯¯ä¸é‡è¯•**: æµ‹é€Ÿå¤±è´¥çš„æºæ°¸è¿œä¸ä¼šé‡è¯•
3. **å†…å­˜ç´¯ç§¯**: videoInfoMap æ°¸è¿œå¢é•¿ï¼Œä¸æ¸…ç†

**å»ºè®®ä¿®å¤**:

```typescript
interface VideoInfoWithTimestamp extends VideoInfo {
  timestamp: number;
  retriesLeft?: number;
}

const getVideoInfo = useCallback(async (source: SearchResult) => {
  const sourceKey = `${source.source}-${source.id}`;
  const now = Date.now();
  const existingInfo = videoInfoMapRef.current.get(sourceKey);

  // âœ… æ£€æŸ¥æ˜¯å¦éœ€è¦é‡æ–°æµ‹é€Ÿ
  if (existingInfo) {
    const age = now - existingInfo.timestamp;
    const MAX_AGE = 5 * 60 * 1000; // 5åˆ†é’Ÿè¿‡æœŸ

    // å¦‚æœç»“æœæœ‰æ•ˆä¸”æœªè¿‡æœŸï¼Œè·³è¿‡
    if (!existingInfo.hasError && age < MAX_AGE) {
      return;
    }

    // å¦‚æœæ˜¯é”™è¯¯ä¸”æ²¡æœ‰é‡è¯•æ¬¡æ•°ï¼Œè·³è¿‡
    if (existingInfo.hasError && (existingInfo.retriesLeft || 0) <= 0) {
      return;
    }
  }

  try {
    const info = await getVideoResolutionFromM3u8(episodeUrl);
    setVideoInfoMap((prev) =>
      new Map(prev).set(sourceKey, {
        ...info,
        timestamp: now,
      })
    );
  } catch (error) {
    setVideoInfoMap((prev) =>
      new Map(prev).set(sourceKey, {
        quality: 'é”™è¯¯',
        loadSpeed: 'æœªçŸ¥',
        pingTime: 0,
        hasError: true,
        timestamp: now,
        retriesLeft: (existingInfo?.retriesLeft || 2) - 1, // å…è®¸é‡è¯•2æ¬¡
      })
    );
  }
}, []);
```

---

### ğŸ” é—®é¢˜ 5: ç±»å‹å®‰å…¨é—®é¢˜

**ä½ç½®**: å¤šå¤„

**é—®é¢˜æè¿°**:
ä»£ç ä¸­å­˜åœ¨å¤šå¤„ç±»å‹ä¸å®‰å…¨çš„å†™æ³•ï¼š

```typescript
// 1. ä½¿ç”¨ any ç±»å‹
artPlayerRef.current.on('ready', () => {}); // artPlayerRef: React.MutableRefObject<any>

// 2. å¼ºåˆ¶ç±»å‹è½¬æ¢
const d = detailRef.current; // å¯èƒ½ä¸ºnull
if (d && d.episodes && idx < d.episodes.length - 1) {
  // ...
}

// 3. å¯é€‰é“¾è¿‡åº¦ä½¿ç”¨
artPlayerRef.current?.video?.hls?.destroy(); // å¦‚æœä¸­é—´æŸä¸ªä¸ºundefinedï¼Œä¸ä¼šæŠ¥é”™ä½†ä¹Ÿä¸ä¼šæ‰§è¡Œ

// 4. localStorage æœªæ ¡éªŒ
const v = localStorage.getItem('enable_blockad');
if (v !== null) return v === 'true'; // vå¯èƒ½æ˜¯ä»»æ„å­—ç¬¦ä¸²
```

**é—®é¢˜**:

1. **è¿è¡Œæ—¶é”™è¯¯é£é™©**: any ç±»å‹è·³è¿‡ç±»å‹æ£€æŸ¥
2. **è°ƒè¯•å›°éš¾**: é”™è¯¯åœ¨è¿è¡Œæ—¶æ‰æš´éœ²
3. **ä»£ç ç»´æŠ¤æ€§å·®**: ä¸æ¸…æ¥šå˜é‡çš„çœŸå®ç±»å‹

**å»ºè®®ä¿®å¤**:

```typescript
// âœ… 1. å®šä¹‰Artplayerç±»å‹
import Artplayer from 'artplayer';
const artPlayerRef = useRef<Artplayer | null>(null);

// âœ… 2. å®Œå–„nullæ£€æŸ¥
const detail = detailRef.current;
if (!detail?.episodes || currentEpisodeIndex >= detail.episodes.length - 1) {
  return;
}

// âœ… 3. æ˜¾å¼æ£€æŸ¥
if (artPlayerRef.current?.video?.hls) {
  artPlayerRef.current.video.hls.destroy();
}

// âœ… 4. localStorageå€¼æ ¡éªŒ
function getBooleanFromStorage(key: string, defaultValue: boolean): boolean {
  try {
    const value = localStorage.getItem(key);
    if (value === null) return defaultValue;
    return value === 'true';
  } catch {
    return defaultValue;
  }
}
```

---

### âš¡ é—®é¢˜ 6: æ€§èƒ½ä¼˜åŒ–ç©ºé—´

**ä½ç½®**: å¤šå¤„

**é—®é¢˜åˆ—è¡¨**:

#### 6.1 çŠ¶æ€æ›´æ–°è¿‡äºé¢‘ç¹

```typescript
// Line 1290-1298: æ¯æ¬¡timeupdateéƒ½æ›´æ–°state
artPlayerRef.current.on('video:timeupdate', () => {
  const currentTime = artPlayerRef.current.currentTime || 0;
  setCurrentPlayTime(currentTime); // âŒ æ¯ç§’è§¦å‘å¤šæ¬¡re-render

  const duration = artPlayerRef.current.duration || 0;
  if (duration > 0 && videoDuration !== duration) {
    setVideoDuration(duration); // âŒ é‡å¤è®¾ç½®
  }
});
```

**å»ºè®®**: ä½¿ç”¨èŠ‚æµ throttleï¼Œæ¯ç§’æœ€å¤šæ›´æ–°ä¸€æ¬¡ï¼š

```typescript
const throttledTimeUpdate = throttle(() => {
  setCurrentPlayTime(artPlayerRef.current?.currentTime || 0);
}, 1000);
```

#### 6.2 ä¸å¿…è¦çš„ effect ä¾èµ–

```typescript
useEffect(() => {
  updateVideoUrl(detail, currentEpisodeIndex);
}, [detail, currentEpisodeIndex]); // detailå¯¹è±¡å¼•ç”¨å˜åŒ–ä¼šè§¦å‘
```

**å»ºè®®**: ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ

#### 6.3 é‡å¤è®¡ç®—

```typescript
// å¤šå¤„è®¡ç®—æ€»é›†æ•°
const totalEpisodes = detail?.episodes?.length || 0;
```

**å»ºè®®**: ä½¿ç”¨ useMemo ç¼“å­˜

---

### ğŸŒ é—®é¢˜ 7: CORS å’Œç½‘ç»œé”™è¯¯å¤„ç†ä¸å®Œå–„

**ä½ç½®**: `src/lib/utils.ts:97-240`

**é—®é¢˜æè¿°**:

```typescript
// Line 114: ä½¿ç”¨no-corsæ¨¡å¼æµ‹é‡ping
fetch(m3u8Url, { method: 'HEAD', mode: 'no-cors' })
  .then(() => {
    pingTime = performance.now() - pingStart;
  })
  .catch(() => {
    pingTime = performance.now() - pingStart;
  });
```

**é—®é¢˜**:

1. **no-cors æ¨¡å¼**: æ— æ³•è·å–å“åº”çŠ¶æ€ï¼Œå¯èƒ½è¯¯åˆ¤
2. **HEAD è¯·æ±‚ä¸æ”¯æŒ**: æŸäº› CDN ä¸æ”¯æŒ HEAD è¯·æ±‚
3. **é”™è¯¯é‡è¯•**: æ²¡æœ‰é‡è¯•æœºåˆ¶
4. **è¶…æ—¶å¤„ç†**: 4 ç§’è¶…æ—¶å¯èƒ½å¤ªçŸ­

**å»ºè®®ä¿®å¤**:

```typescript
// âœ… æ”¹è¿›çš„pingæµ‹é‡
async function measurePing(url: string, retries = 2): Promise<number> {
  for (let i = 0; i <= retries; i++) {
    try {
      const start = performance.now();

      // å…ˆå°è¯•CORSè¯·æ±‚
      const response = await fetch(url, {
        method: 'HEAD',
        mode: 'cors',
        cache: 'no-store',
      });

      if (response.ok) {
        return performance.now() - start;
      }

      // CORSå¤±è´¥ï¼Œå°è¯•GETéƒ¨åˆ†å†…å®¹
      const getResponse = await fetch(url, {
        method: 'GET',
        headers: { Range: 'bytes=0-0' },
      });

      return performance.now() - start;
    } catch (err) {
      if (i === retries) {
        // æœ€åä¸€æ¬¡å°è¯•ï¼Œä½¿ç”¨no-cors
        const start = performance.now();
        await fetch(url, { method: 'GET', mode: 'no-cors' });
        return performance.now() - start;
      }
      // ç»§ç»­é‡è¯•
      await delay(500);
    }
  }

  return 0;
}
```

---

### ğŸ¯ é—®é¢˜ 8: URL å‚æ•°åŒæ­¥é—®é¢˜

**ä½ç½®**: `src/app/play/page.tsx:668-676`

**é—®é¢˜æè¿°**:

```typescript
// è§„èŒƒURLå‚æ•°
const newUrl = new URL(window.location.href);
newUrl.searchParams.set('source', detailData.source);
newUrl.searchParams.set('id', detailData.id);
newUrl.searchParams.set('year', detailData.year);
newUrl.searchParams.set('title', detailData.title);
newUrl.searchParams.delete('prefer');
window.history.replaceState({}, '', newUrl.toString());
```

**é—®é¢˜**:

1. **ç¼ºå°‘å‚æ•°**: æ²¡æœ‰åŒæ­¥ `stitle`ï¼ˆæœç´¢æ ‡é¢˜ï¼‰å’Œ `stype`ï¼ˆæœç´¢ç±»å‹ï¼‰
2. **é›†æ•°æœªåŒæ­¥**: currentEpisodeIndex æœªä¿å­˜åˆ° URL
3. **åˆ·æ–°é—®é¢˜**: åˆ·æ–°é¡µé¢åé›†æ•°ä¿¡æ¯ä¸¢å¤±

**å»ºè®®ä¿®å¤**:

```typescript
// âœ… å®Œæ•´çš„URLå‚æ•°åŒæ­¥
function syncUrlParams(detail: SearchResult, episodeIndex: number) {
  const newUrl = new URL(window.location.href);

  // åŸºæœ¬ä¿¡æ¯
  newUrl.searchParams.set('source', detail.source);
  newUrl.searchParams.set('id', detail.id);
  newUrl.searchParams.set('year', detail.year);
  newUrl.searchParams.set('title', detail.title);

  // é›†æ•°ä¿¡æ¯
  if (episodeIndex > 0) {
    newUrl.searchParams.set('ep', String(episodeIndex + 1));
  } else {
    newUrl.searchParams.delete('ep');
  }

  // ä¿ç•™æœç´¢ä¿¡æ¯ï¼ˆç”¨äºæ¢æºï¼‰
  if (searchTitle) {
    newUrl.searchParams.set('stitle', searchTitle);
  }
  if (searchType) {
    newUrl.searchParams.set('stype', searchType);
  }

  // åˆ é™¤ä¸€æ¬¡æ€§å‚æ•°
  newUrl.searchParams.delete('prefer');

  window.history.replaceState({}, '', newUrl.toString());
}
```

---

### ğŸ’¬ é—®é¢˜ 9: ç¼ºå°‘é”™è¯¯è¾¹ç•Œ

**ä½ç½®**: æ•´ä¸ªæ’­æ”¾é¡µé¢

**é—®é¢˜æè¿°**:
æ’­æ”¾é¡µé¢æ²¡æœ‰é”™è¯¯è¾¹ç•Œï¼ˆError Boundaryï¼‰ï¼Œä»»ä½•è¿è¡Œæ—¶é”™è¯¯éƒ½ä¼šå¯¼è‡´æ•´ä¸ªé¡µé¢å´©æºƒã€‚

**å»ºè®®ä¿®å¤**:

```typescript
// âœ… æ·»åŠ é”™è¯¯è¾¹ç•Œ
class PlayPageErrorBoundary extends React.Component<
  { children: React.ReactNode },
  { hasError: boolean; error: Error | null }
> {
  constructor(props: any) {
    super(props);
    this.state = { hasError: false, error: null };
  }

  static getDerivedStateFromError(error: Error) {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    console.error('æ’­æ”¾é¡µé¢é”™è¯¯:', error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return (
        <PageLayout>
          <div>
            <h1>æ’­æ”¾å™¨å‡ºç°é”™è¯¯</h1>
            <p>{this.state.error?.message}</p>
            <button onClick={() => window.location.reload()}>åˆ·æ–°é¡µé¢</button>
          </div>
        </PageLayout>
      );
    }

    return this.props.children;
  }
}

// ä½¿ç”¨
export default function PlayPage() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <PlayPageErrorBoundary>
        <PlayPageClient />
      </PlayPageErrorBoundary>
    </Suspense>
  );
}
```

---

### ğŸ”„ é—®é¢˜ 10: æ¢æºæ—¶çš„çŠ¶æ€ç®¡ç†æ··ä¹±

**ä½ç½®**: `src/app/play/page.tsx:720-793`

**é—®é¢˜æè¿°**:

```typescript
const handleSourceChange = async (
  newSource: string,
  newId: string,
  newTitle: string
) => {
  try {
    setVideoLoadingStage('sourceChanging');
    setIsVideoLoading(true);

    // è®°å½•å½“å‰æ’­æ”¾è¿›åº¦
    const currentPlayTime = artPlayerRef.current?.currentTime || 0;

    // âŒ åˆ é™¤å‰ä¸€ä¸ªæ’­æ”¾è®°å½•ï¼ˆä¸ºä»€ä¹ˆè¦åˆ é™¤ï¼Ÿï¼‰
    if (currentSourceRef.current && currentIdRef.current) {
      try {
        await deletePlayRecord(currentSourceRef.current, currentIdRef.current);
      } catch (err) {
        console.error('æ¸…é™¤æ’­æ”¾è®°å½•å¤±è´¥:', err);
      }
    }

    // ...

    // âŒ æ¢å¤æ—¶æœºä¸æ˜ç¡®
    if (targetIndex !== currentEpisodeIndex) {
      resumeTimeRef.current = 0;
    } else if (
      (!resumeTimeRef.current || resumeTimeRef.current === 0) &&
      currentPlayTime > 1
    ) {
      resumeTimeRef.current = currentPlayTime;
    }

    // ...
  } catch (err) {
    setIsVideoLoading(false); // âŒ é”™è¯¯æ—¶åªæ¢å¤éƒ¨åˆ†çŠ¶æ€
    setError(err instanceof Error ? err.message : 'æ¢æºå¤±è´¥');
  }
};
```

**é—®é¢˜**:

1. **åˆ é™¤æ’­æ”¾è®°å½•ä¸åˆç†**: æ¢æºä¸åº”è¯¥åˆ é™¤æ’­æ”¾è®°å½•ï¼Œåº”è¯¥ä¿ç•™
2. **çŠ¶æ€æ¢å¤ä¸å®Œæ•´**: é”™è¯¯æ—¶æ²¡æœ‰æ¢å¤æ‰€æœ‰çŠ¶æ€
3. **é€»è¾‘å¤æ‚**: resumeTimeRef çš„åˆ¤æ–­é€»è¾‘è¿‡äºå¤æ‚
4. **ç”¨æˆ·ä½“éªŒå·®**: æ¢æºå¤±è´¥åç”¨æˆ·éœ€è¦é‡æ–°å¼€å§‹

**å»ºè®®ä¿®å¤**:

```typescript
const handleSourceChange = async (
  newSource: string,
  newId: string,
  newTitle: string
) => {
  // âœ… ä¿å­˜å½“å‰å®Œæ•´çŠ¶æ€
  const previousState = {
    source: currentSourceRef.current,
    id: currentIdRef.current,
    episodeIndex: currentEpisodeIndexRef.current,
    playTime: artPlayerRef.current?.currentTime || 0,
  };

  try {
    setVideoLoadingStage('sourceChanging');
    setIsVideoLoading(true);

    const newDetail = availableSources.find(
      (source) => source.source === newSource && source.id === newId
    );

    if (!newDetail) {
      throw new Error('æœªæ‰¾åˆ°åŒ¹é…ç»“æœ');
    }

    // âœ… ä¿å­˜æ—§æºçš„æ’­æ”¾è®°å½•ï¼ˆä¸åˆ é™¤ï¼‰
    await saveCurrentPlayProgress();

    // è®¡ç®—ç›®æ ‡é›†æ•°å’Œè¿›åº¦
    let targetIndex = currentEpisodeIndex;
    let targetTime = 0;

    if (targetIndex >= newDetail.episodes.length) {
      targetIndex = 0;
    } else {
      // åŒä¸€é›†æ•°ï¼Œä¿æŒæ’­æ”¾è¿›åº¦
      targetTime = previousState.playTime;
    }

    // æ›´æ–°çŠ¶æ€
    setVideoTitle(newDetail.title || newTitle);
    setVideoYear(newDetail.year);
    setVideoCover(newDetail.poster);
    setCurrentSource(newSource);
    setCurrentId(newId);
    setDetail(newDetail);
    setCurrentEpisodeIndex(targetIndex);
    resumeTimeRef.current = targetTime;

    // åŒæ­¥URL
    syncUrlParams(newDetail, targetIndex);
  } catch (err) {
    // âœ… é”™è¯¯æ—¶æ¢å¤å®Œæ•´çŠ¶æ€
    console.error('æ¢æºå¤±è´¥:', err);
    setCurrentSource(previousState.source);
    setCurrentId(previousState.id);
    setCurrentEpisodeIndex(previousState.episodeIndex);
    resumeTimeRef.current = previousState.playTime;
    setIsVideoLoading(false);
    setError(err instanceof Error ? err.message : 'æ¢æºå¤±è´¥');
  }
};
```

---

## ğŸ“‹ é—®é¢˜ä¼˜å…ˆçº§

### ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆå¿…é¡»ä¿®å¤ï¼‰

1. âœ… **é—®é¢˜ 1**: æ’­æ”¾å™¨å†…å­˜æ³„æ¼é£é™©
2. âœ… **é—®é¢˜ 2**: é‡å¤çš„ timeupdate ç›‘å¬
3. âœ… **é—®é¢˜ 9**: ç¼ºå°‘é”™è¯¯è¾¹ç•Œ
4. âœ… **é—®é¢˜ 10**: æ¢æºæ—¶çš„çŠ¶æ€ç®¡ç†æ··ä¹±

### ğŸŸ  ä¸­ä¼˜å…ˆçº§ï¼ˆå»ºè®®ä¿®å¤ï¼‰

5. âœ… **é—®é¢˜ 3**: WebKit æµè§ˆå™¨ç‰¹æ®Šå¤„ç†é€»è¾‘
6. âœ… **é—®é¢˜ 5**: ç±»å‹å®‰å…¨é—®é¢˜
7. âœ… **é—®é¢˜ 7**: CORS å’Œç½‘ç»œé”™è¯¯å¤„ç†
8. âœ… **é—®é¢˜ 8**: URL å‚æ•°åŒæ­¥é—®é¢˜

### ğŸŸ¡ ä½ä¼˜å…ˆçº§ï¼ˆä¼˜åŒ–æ€§èƒ½ï¼‰

9. âœ… **é—®é¢˜ 4**: æµ‹é€Ÿç»“æœæœªè¿‡æœŸå¤„ç†
10. âœ… **é—®é¢˜ 6**: æ€§èƒ½ä¼˜åŒ–ç©ºé—´

---

## ğŸ¯ æ”¹è¿›å»ºè®®æ€»ç»“

### ä»£ç è´¨é‡

1. **æ·»åŠ ç±»å‹å®šä¹‰**: ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
2. **é”™è¯¯è¾¹ç•Œ**: æ·»åŠ  React Error Boundary
3. **æµ‹è¯•è¦†ç›–**: æ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
4. **ä»£ç åˆ†å‰²**: å°†å¤§æ–‡ä»¶æ‹†åˆ†ä¸ºå¤šä¸ªå°æ¨¡å—

### æ€§èƒ½ä¼˜åŒ–

1. **ä½¿ç”¨ useMemo/useCallback**: ç¼“å­˜è®¡ç®—ç»“æœå’Œå‡½æ•°
2. **èŠ‚æµ/é˜²æŠ–**: å‡å°‘é¢‘ç¹çš„ state æ›´æ–°
3. **æ‡’åŠ è½½**: é€‰é›†ç»„ä»¶ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
4. **Worker**: å°†æµ‹é€Ÿé€»è¾‘ç§»åˆ° Web Worker

### åŠŸèƒ½å¢å¼º

1. **æ’­æ”¾åˆ—è¡¨**: æ”¯æŒè¿ç»­æ’­æ”¾å¤šä¸ªå‰§é›†
2. **å­—å¹•æ”¯æŒ**: æ·»åŠ å­—å¹•åŠ è½½å’Œåˆ‡æ¢
3. **ä¸‹è½½åŠŸèƒ½**: å…è®¸ä¸‹è½½è§†é¢‘
4. **æˆªå›¾åŠŸèƒ½**: å…è®¸æˆªå›¾ä¿å­˜
5. **å†å²è®°å½•**: æ›´å®Œå–„çš„è§‚çœ‹å†å²ç®¡ç†

### ç”¨æˆ·ä½“éªŒ

1. **åŠ è½½åŠ¨ç”»**: æ›´æµç•…çš„è¿‡æ¸¡åŠ¨ç”»
2. **æ‰‹åŠ¿æ§åˆ¶**: ç§»åŠ¨ç«¯æ»‘åŠ¨æ‰‹åŠ¿
3. **ç”»è´¨åˆ‡æ¢**: å…è®¸æ‰‹åŠ¨åˆ‡æ¢ç”»è´¨
4. **å€é€Ÿè®°å¿†**: è®°ä½ç”¨æˆ·çš„å€é€Ÿåå¥½
5. **æ’­æ”¾æ¨¡å¼**: åˆ—è¡¨å¾ªç¯ã€å•é›†å¾ªç¯ç­‰

---

## ğŸ“Š ä»£ç å¥åº·åº¦è¯„åˆ†

| ç»´åº¦           | è¯„åˆ†       | è¯´æ˜                   |
| -------------- | ---------- | ---------------------- |
| **åŠŸèƒ½å®Œæ•´æ€§** | â­â­â­â­â­ | åŠŸèƒ½éå¸¸ä¸°å¯Œå®Œæ•´       |
| **ä»£ç å¯è¯»æ€§** | â­â­â­â­   | ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ³¨é‡Šè¾ƒå¥½ |
| **ç±»å‹å®‰å…¨**   | â­â­â­     | å­˜åœ¨è¾ƒå¤š any ç±»å‹      |
| **é”™è¯¯å¤„ç†**   | â­â­â­     | åŸºæœ¬é”™è¯¯å¤„ç†ï¼Œä½†ä¸å®Œå–„ |
| **æ€§èƒ½ä¼˜åŒ–**   | â­â­â­     | æœ‰ä¼˜åŒ–ä½†ä»æœ‰æå‡ç©ºé—´   |
| **å¯ç»´æŠ¤æ€§**   | â­â­â­     | æ–‡ä»¶è¿‡å¤§ï¼Œéœ€è¦æ‹†åˆ†     |
| **æµ‹è¯•è¦†ç›–**   | â­         | ç¼ºå°‘è‡ªåŠ¨åŒ–æµ‹è¯•         |

**æ€»ä½“è¯„åˆ†**: â­â­â­â­ (4/5 æ˜Ÿ)

---

## âœ… æ€»ç»“

V0TV çš„æ’­æ”¾åŠŸèƒ½æ•´ä½“å®ç°å¾—**éå¸¸å®Œå–„**ï¼ŒåŒ…å«äº†ï¼š

- âœ… å®Œæ•´çš„æ’­æ”¾å™¨åŠŸèƒ½
- âœ… æ™ºèƒ½æ¢æºå’Œæµ‹é€Ÿ
- âœ… ç‰‡å¤´ç‰‡å°¾è·³è¿‡
- âœ… æ’­æ”¾è®°å½•ç®¡ç†
- âœ… æ”¶è—åŠŸèƒ½
- âœ… é”®ç›˜å¿«æ·é”®
- âœ… å“åº”å¼ UI

ä½†ä¹Ÿå­˜åœ¨ä¸€äº›**éœ€è¦æ”¹è¿›**çš„åœ°æ–¹ï¼š

- âŒ å†…å­˜æ³„æ¼é£é™©
- âŒ é‡å¤ç›‘å¬
- âŒ ç±»å‹å®‰å…¨é—®é¢˜
- âŒ ç¼ºå°‘é”™è¯¯è¾¹ç•Œ
- âŒ çŠ¶æ€ç®¡ç†å¯ä¼˜åŒ–

å»ºè®®ä¼˜å…ˆä¿®å¤**é«˜ä¼˜å…ˆçº§é—®é¢˜**ï¼Œç„¶åé€æ­¥ä¼˜åŒ–å…¶ä»–æ–¹é¢ã€‚

---

**æœ€åæ›´æ–°**: 2025-11-12
**åˆ†æäººå‘˜**: Claude Code
**é—®é¢˜æ€»æ•°**: 10 ä¸ª
**é«˜ä¼˜å…ˆçº§**: 4 ä¸ª
**ä¸­ä¼˜å…ˆçº§**: 4 ä¸ª
**ä½ä¼˜å…ˆçº§**: 2 ä¸ª
