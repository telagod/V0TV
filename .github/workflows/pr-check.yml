name: PR 检查

on:
  pull_request:
    types: [opened, edited, synchronize, reopened]

jobs:
  pr-title-check:
    runs-on: ubuntu-latest
    name: 检查 PR 标题格式

    steps:
      - name: 检查 PR 标题
        uses: amannn/action-semantic-pull-request@v5
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          # 允许的类型
          types: |
            feat
            fix
            docs
            style
            refactor
            perf
            test
            build
            ci
            chore
            revert
          # 需要 scope（可选）
          requireScope: false
          # 允许的 scope
          scopes: |
            api
            ui
            player
            admin
            config
            deps
          # 主题（标题的主要部分）的最小长度
          subjectMinLength: 5
          # 主题的正则模式
          subjectPattern: ^[A-Z\u4e00-\u9fa5].+$
          # 错误信息
          subjectPatternError: |
            标题的主题部分必须以大写字母或中文开头，并且至少5个字符。

            示例：
            - feat: 添加用户登录功能
            - fix: 修复播放器暂停问题
            - docs: 更新部署文档
